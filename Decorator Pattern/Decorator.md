چگونه به یک کلاس یک مسئولیت جدید بدهیم بدون آنکه کلاس های زیر مجموعه هیچ تغییری نکنند.

یک دیزاین پترن ساختاری که به ما اجازه می دهد رفتارهای جدید به یک ابجکت با قراردادن آن در یک پوشه آبجکت مخصوص بدهیم.

### Problem Refacturing Guru

فرض کنید یک سیستم ارسال نوتیفیکیشن با استفاده از پیامک وجود دارد سپس سیستم های دیگری برای ارسال نوتیفیکیشن با فیسبوک و تلگرام و واتساپ اضافه می شود. اگر بخواهید به صورت ترکیبی پیام ها را ارسال کنید و برای هر ترکیب بخواهید یک کلاس جدید تعریف کنید دچار انفجار تعداد کلاس ها می شوید.

### Problem

فرض کنید یک کافی شاپ وجود دارد که انواع نوشیدنی را به فروش می رساند مانند قهوه، چای، آبمیوه و ...

بعد از مدتی این کافی شاپ می خواهد به نوشیدنی های خود قابلیت شخصی سازی بدهد مثلا چای به همراه یخ، چای به همراه زعفران و قهوه به همراه شکلات و ....

#### Solve One

اگر این قابلیت های شخصی سازی بخواهد به صورت کلاس افزوده شود باعث انفجار تعداد کلاس ها می شود. امکان تغییرات دشوار می شود مثلا اگر قیمت یخ تغییر کند شما مجبور هستید تعداد زیادی کلاس را ویرایش کنید.

#### Solve Two

قیمت همه افزودنی ها در کلاس اصلی تعیین شود و کلاس های فرزند با ست کردن پرچم های مختلف قیمت کلی نوشیدنی را محاسبه کنند.

1-اگر قیمت افزودنی ها تغییر کند نیاز به تغییر کلاس اصلی داریم.

2-اگر افزودنی جدید بخواهد اضافه شود نیاز است کلاس اصلی تغییر کند.

3-اگر کاربر یک افزودنی را چند بار بخواهد در این حالت به مشکل می خوریم.

4-اصل open-close رعایت نمی شود نسبت به تغییرات بسته و نسبت به افزودن ویژگی های جدید باز

هدف این است که بتوان ویژگی های جدید را بدون تغییر دادن کد انجام داد.

استفاده از open-close در همه جا خطرناک است و باعث پیچیدگی کد و درک سخت آن می شود.

#### Solve

در ادامه با استفاده از فکتوری پترن و بیلدر پترن روش های بهتری برای ساخت دکوراتور یاد می گیریم.

این دیزاین پترن گاهی اوقات تعداد زیادی کلاس کوچک ایجاد می کند. که این مورد باعث پیچیدگی می شود. چندین wrapper ایجاد می شود(هر سطح بالا تر را یک wrapper یا پوشه می گویند.)

افزودن یک مسئولیت به یک کلاس به صورت داینامیک.