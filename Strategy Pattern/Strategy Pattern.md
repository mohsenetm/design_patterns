## Strategy Pattern

این دیزاین پترن در گروه دیزاین پترن های رفتاری است.

تعریف خانواده ای از الگوریتم ها، کپسوله کردن هر کدام از آن ها(محدود کردن دسترسی به اجزای هر یک از شی ها)، دادن قابلیت تعویض آن ها با یکدیگر. این دیزاین پترن باعث می شود گه یک الگوریتم کاملا مستقل از کلاینت وظیفه خود را انجام دهد.(تعریف گنگ آو فور)

تعریف خانواده ای از الگوریتم ها که هر کدام از آن ها را درون یککلاس جدا قرار می دهیم این کلاس ها قابلیت جایگزینی با یکدیگر را دارند.(Refactoring Guru)

استلزام خانواده ای از الگوریتم ها برای ارث بری از یک اینترفیس مشخص و ارسال این الگوریتم ها به متود سازنده کلاس هایی که از این الگوریتم ها استفاده می کنند.

### Refactoring Guru

#### Problem

فرض کنید شما می خواهید یک نرم افزار راهنمای مسیریابی برای رانندگان طراحی کنید. مهم ترین اصل در این نرم افزار پیاده سازی یک سیستم مسیریابی است که کاربر با وارد کردن مبدا و مقصد سریع ترین مسیر ممکن را پیدا کند. در ورژن اولیه نرم افزار این مسیر یابی را با استفاده از مسیر جاده ای انجام می دهید.

در ورژن های بعدی شما روش های جدیدی برای حمل و نقل پیشنهاد می کنید مثلا مسیریابی با استفاده از دوچرخه یا وسایل حمل و نقل عمومی. این اضافه کردن ویژگی های جدید باعث می شود حجم کد شما بسیار زیاد شود.

#### Solve

استراتژی پترن پیشنهاد می دهد الگوریتم های مشابه را از یکدیگر جدا کرده و در چند کلاس متفاوت که به آن ها استراتژی گفته می شود پیاده سازی کرد. کلاس اجرایی باید فیلد هایی برای ذخیره استراتژی ها داشته باشد. سایر کلاس ها استراتژی ها را به کلاس اصلی ارسال می کنند و کلاس اصلی استراتژی را اجرا می کند کلاس اصلی اطلاعی در مورد استراتژی ها ندارند و از نحوه اجرای آن اطلاعی ندارد و تنها می داند از یک اینترفیس ارث بری می کنند.

#### Advantage

شما می توانید الگوریتم موجود در یک آبجکت را حین اجرا به راحتی عوض کنید.

پنهان سازی نحوه پیاده سازی الگوریتم از کلاینت

استفاده از ادغام به جای ارث بری

رعایت اصل open/close

#### Disadvantage

شما الگوریتم های محدودی دارید و این الگوریتم ها به ندرت تغییر می کنند واقعا نیاز نیست از این دیزاین پترن استفاده کنید.

کلاینت باید از تفاوت الگوریتم ها اطلاع داشته باشد.

در زبان های برنامه نویسی جدید که از برنامه نویسی فانکشنال استفاده می کنند به ما اجازه می دهد که انواع متفاوت الگوریتم ها را درون توابع بی نام پیاده سازی شود استفاده از استراتژی پترن باعث می شود که کد را با آبجکت و کلاس ها ادغام شود.

#### Gang Of Four

#### Problem

الگوریتم های متفاوتی برای شکستن یک رشته متن به چندین خط وجود دارد.کلاینت نیاز به شکستن خطوط دارد و نمی خواهد درگیر کد شکستن خطوط شود. برای کلاینت سخت تر و دشوار تر خواهد بود اگر بخواهد از چندین روش برای شکستن خطوط پشتیبانی کند. هر کدام از این الگوریتم ها برای زمان های گوناگون مورد نیاز هستند بنابراین نمی خواهیم از همه آن ها پشتیبانی کنیم. اضافه کردن یک الگوریتم خیلی سخت خواهد بود وقتی الگوریتم ها قسمتی از کلاینت باشند.

#### Solve

برای اینکار باید یک کلاس تعریف شود که روش شکستن خطوط را کپسوله کند این روش کپسوله کردن الگوریتم ها استراتژی نام دارد.

#### Why TIme To Use Strategy Pattern

کلاس های زیادی وجود دارد که تنها در رفتار متفاوت هستند این رفتارها را با استراتژی پیاده سازی کرد.

الگوریتم تنها به داده نیاز دارد و نیازی نیست کلاینت بداند از چه الگوریتمی استفاده می شود این کار پیچیدگی را کاهش می دهد.

یک کلاس رفتار های مشابه زیادی دارد و این رفتارها با شروط از یکدیگر جدا شده اند می توان این رفتار ها را با استراتژی از یکدیگر جدا کرد.

#### Advantage

گروهی از کلاس های مشابه با یکدیگر جمع می شوند و به خاطر ارث بری توابع تکراری حذف می شود.

باعث می شود کلاینت مستقیم از الگوریتم کار کند.

استفاده از استراتژی پترن برای کم کردن شروط مورد استفاده قرار می گیرد.

#### Disadvantage

کلاینت باید نوع استراتژی را بداند بنابراین قبل از استفاده از استراتژی ها تفاوت آن ها را کلاینت بداند.

فرستادن اطلاعات اضافی به کلاینت ها

ساختن اشیا زیاد.

### Head First Design Pattern

#### Problem

ما یک شبیه ساز زندگی اردک داریم و اکنون می خواهیم پرواز کردن را اضافه کنیم.

#### Problem Solve One

در حالت اول ارث بری استفاده شده است و خوب متود پرواز را هم به کلاس پدر اضافه می شود.

مشکل اردک پلاستیکی پرواز می کند.

مشکلاتی که این کار بوجود می آورد:

1-باید متود ها را درکلاس های بسیاری باز نویسی کرد.

2-اگر رفتار جدید به کلاس پدر اضافه شود باید همه کلاس های فرزند مورد بازنگری قرار بگیرد.

3-اگر همه رفتار توسط پدر پیاده سازی شود بررسی رفتار یک کلاس دشوار خواهد بود.

#### Problem Solve Two

استفاده از اینترفیس

یک کابوس به تمام معنا، باید در همه کلاس ها نحوه پیاده سازی متودها را بیان کرد.

#### Solve

انتقال رفتار به کلاس هایی به نام استراتژی که از یک اینترفیس استفاده می کنند. این رفتار ها در متود سازنده کلاس اردک ازشون شی ساخته می شود.

#### Advantage

کپسوله کردن کلاس های رفتاری

تقدم ادغام بر ارث بری

انتقال حل مسئله به اینترفیس نه پیاده سازی